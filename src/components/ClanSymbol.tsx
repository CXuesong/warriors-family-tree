import { Tooltip } from "@material-ui/core";
import classNames from "classnames";
import * as React from "react";
import { RdfQName } from "../services/dataService";
import scss from "./ClanSymbol.scss";
import { RdfEntityLabel } from "./RdfEntity";

export interface IClanSymbolProps {
    className?: string;
}

function makeClanSymbol(name: string, viewBoxWidth: number, viewBoxHeight: number, path: React.ReactElement): React.FC<IClanSymbolProps> {
    function clanSymbolHoc(props: IClanSymbolProps) {
        return (<svg
            className={classNames(scss.clanSymbolIcon, props.className)}
            viewBox={`0 0 ${viewBoxWidth} ${viewBoxHeight}`}>
            {path}
        </svg>);
    }
    clanSymbolHoc.displayName = name + "[Core]";
    const component: React.FC<IClanSymbolProps> = React.memo(clanSymbolHoc);
    component.displayName = name;
    return component;
}

// TC/WC/ShC/RC/StC icons are transcribed from https://www.deviantart.com/riverspirit456/art/The-Clan-Symbols-434128989 .
export const ThunderClan = makeClanSymbol("ThunderClan", 566, 620,
    <path fillRule="evenodd" d="M-0.000,-0.000 C57.666,49.666 115.333,99.333 173.000,149.000 C247.000,149.000 321.000,149.000 395.000,149.000 C451.667,99.333 508.333,49.666 565.000,-0.000 C565.333,181.000 565.667,362.000 566.000,543.000 C507.666,491.667 449.333,440.333 391.000,389.000 C392.000,404.333 393.000,419.667 394.000,435.000 C328.000,378.666 262.000,322.333 196.000,266.000 C196.333,289.667 196.666,313.333 197.000,337.000 C131.333,287.333 65.667,237.666 -0.000,188.000 C-0.000,125.333 -0.000,62.667 -0.000,-0.000 ZM-0.000,365.000 C72.000,412.000 144.000,459.000 216.000,506.000 C215.333,484.666 214.666,463.333 214.000,442.000 C282.667,475.333 351.333,508.666 420.000,542.000 C419.000,529.000 418.000,516.000 417.000,503.000 C466.666,537.333 516.333,571.667 566.000,606.000 C566.000,610.333 566.000,614.666 566.000,619.000 C377.333,619.333 188.667,619.666 -0.000,620.000 C-0.000,535.000 -0.000,450.000 -0.000,365.000 Z" />
);

export const WindClan = makeClanSymbol("WindClan", 565, 617,
    <path fillRule="evenodd"
        d="M565.000,406.000 C557.667,405.000 550.333,404.000 543.000,403.000 C511.984,398.254 480.699,398.543 450.000,404.000 C433.649,406.907 417.629,411.249 402.000,417.000 C441.008,374.744 451.675,323.918 435.000,285.999 C428.330,270.832 416.525,256.586 400.000,245.000 C387.140,235.983 357.226,226.154 320.000,224.000 C271.930,221.219 233.139,235.707 221.999,244.000 C214.240,249.777 210.395,255.573 208.384,260.673 C206.946,264.322 206.072,268.424 206.000,272.999 C205.843,282.925 208.671,291.951 211.834,297.743 C228.401,328.082 286.130,338.028 310.000,317.000 C315.297,312.334 319.377,306.349 319.000,300.000 C318.256,287.481 301.193,278.884 299.000,281.000 C297.049,282.883 307.456,292.886 304.000,301.000 C300.803,308.504 288.575,310.188 282.000,310.000 C263.340,309.466 242.888,292.907 244.000,276.000 C244.358,270.559 249.152,261.006 262.000,252.000 C270.990,245.699 287.921,238.651 312.000,239.000 C337.363,239.368 354.453,246.492 366.000,254.000 C377.389,261.405 399.755,279.423 404.000,305.000 C412.714,357.503 343.874,416.540 279.000,428.000 C230.150,436.629 198.210,415.600 147.000,400.000 C100.869,385.947 51.942,380.760 -0.000,384.000 C-0.000,256.000 -0.000,128.000 -0.000,-0.000 C57.333,49.667 114.667,99.333 172.000,149.000 C246.000,149.000 320.000,149.000 394.000,149.000 C451.000,99.333 508.000,49.667 565.000,-0.000 C565.000,135.333 565.000,270.667 565.000,406.000 ZM106.000,458.000 C182.721,459.431 213.637,505.690 282.000,509.999 C300.182,511.145 345.811,502.086 389.000,487.000 C417.842,476.926 447.052,463.643 488.000,468.000 C515.579,470.935 541.281,481.187 565.000,497.000 C565.000,537.000 565.000,577.000 565.000,617.000 C377.000,617.000 189.000,617.000 1.000,617.000 C1.000,569.667 1.000,522.333 1.000,475.000 C23.333,470.333 45.667,465.667 68.000,461.000 C80.614,458.776 93.283,457.763 106.000,458.000 Z" />
);

export const ShadowClan = makeClanSymbol("ShadowClan", 566, 620,
    <path fillRule="evenodd"
        d="M405.000,618.000 C408.214,596.818 405.974,575.522 398.000,556.000 C386.155,527.001 358.321,494.639 313.000,486.000 C274.596,478.680 236.619,491.745 211.000,517.000 C191.016,536.700 179.266,563.028 177.000,591.000 C177.667,600.000 178.333,609.000 179.000,618.000 C119.333,618.000 59.666,618.000 -0.000,618.000 C-0.000,412.000 -0.000,206.000 -0.000,0.000 C57.000,49.666 114.000,99.333 171.000,149.000 C245.333,149.000 319.666,149.000 394.000,149.000 C451.000,99.333 508.000,49.666 565.000,0.000 C565.000,206.000 565.000,412.000 565.000,618.000 C511.666,618.000 458.333,618.000 405.000,618.000 ZM353.000,303.000 C355.001,336.377 382.825,362.740 416.000,363.000 C449.547,363.263 477.974,336.752 480.000,303.000 C437.666,303.000 395.333,303.000 353.000,303.000 ZM67.000,303.000 C70.094,337.038 99.069,363.257 133.000,363.000 C166.559,362.745 194.942,336.665 198.000,303.000 C154.333,303.000 110.666,303.000 67.000,303.000 Z" />
);

export const RiverClan = makeClanSymbol("RiverClan", 563, 617,
    <path fillRule="evenodd"
        d="M563.000,314.000 C550.137,313.216 537.482,313.215 525.000,314.000 C485.133,316.508 458.884,325.760 449.000,313.000 C437.709,298.424 460.175,266.611 450.000,258.000 C447.039,255.494 442.482,255.893 438.000,257.000 C413.862,262.961 311.601,300.734 260.000,320.000 C248.797,323.857 239.970,324.404 235.000,320.000 C222.230,308.685 244.860,273.414 232.000,259.000 C217.614,242.875 171.406,262.559 161.000,267.000 C129.686,280.363 31.340,320.128 0.000,333.000 C0.000,222.000 0.000,111.000 0.000,-0.000 C57.000,49.667 114.000,99.333 171.000,149.000 C245.333,149.000 319.667,149.000 394.000,149.000 C450.333,99.333 506.667,49.667 563.000,-0.000 C563.000,104.667 563.000,209.333 563.000,314.000 ZM563.000,502.000 C548.160,501.342 533.500,501.672 519.000,503.000 C483.677,506.234 457.995,514.137 449.000,502.000 C438.586,487.948 461.638,458.770 452.000,449.000 C446.693,443.620 434.740,447.349 427.000,450.000 C411.478,455.316 396.687,460.898 382.000,467.000 C349.924,477.436 319.895,488.742 292.000,501.000 C277.681,507.292 245.241,521.685 234.000,510.000 C221.604,497.114 245.667,463.481 233.000,449.000 C218.937,432.922 172.282,452.636 162.000,457.000 C121.630,474.136 54.339,501.336 0.000,524.000 C0.000,482.333 0.000,440.667 0.000,399.000 C25.781,384.661 51.825,370.306 78.000,356.000 C96.882,345.680 150.382,317.216 160.000,329.000 C163.995,333.895 157.236,344.191 159.000,355.000 C161.951,373.082 177.544,384.404 187.000,389.000 C195.969,393.359 205.966,395.006 216.000,394.000 C260.035,375.334 330.424,345.898 353.000,335.000 C356.392,333.363 368.582,327.339 374.000,332.000 C376.918,334.510 376.153,338.666 377.000,342.000 C380.919,357.417 421.042,361.179 464.000,361.000 C497.000,355.333 530.000,349.667 563.000,344.000 C563.000,396.667 563.000,449.333 563.000,502.000 ZM85.000,542.000 C105.247,532.642 125.909,524.311 147.000,517.000 C153.409,515.264 158.202,515.439 161.000,518.000 C167.183,523.659 159.462,539.585 163.000,552.000 C166.860,565.545 178.961,574.042 184.000,577.000 C208.169,591.187 240.965,577.849 268.000,565.000 C323.216,538.759 366.378,512.936 375.000,522.000 C377.248,524.363 375.863,528.664 377.000,532.000 C381.118,544.084 401.433,549.478 427.000,551.000 C467.369,553.404 518.326,544.953 563.000,534.000 C563.000,561.667 563.000,589.333 563.000,617.000 C375.333,616.667 187.667,616.333 0.000,616.000 C0.000,607.000 0.000,598.000 0.000,589.000 C27.210,571.285 55.563,555.605 85.000,542.000 Z" />
);

export const SkyClan: React.FC<IClanSymbolProps> = (props) => {
    return <div className={classNames(scss.clanSymbolFallback, props.className)}>SkC</div>;
};

export const StarClan = makeClanSymbol("StarClan", 565, 620,
    <path fillRule="evenodd"
        d="M-0.000,-0.000 C57.333,50.333 114.667,100.667 172.000,151.000 C246.333,151.000 320.667,151.000 395.000,151.000 C451.667,101.000 508.333,51.000 565.000,1.000 C565.000,207.333 565.000,413.666 565.000,619.999 C540.667,620.000 516.333,620.000 492.000,620.000 C458.000,571.333 424.000,522.667 390.000,474.000 C429.667,439.667 469.333,405.333 509.000,371.000 C451.000,371.000 393.000,371.000 335.000,371.000 C319.000,339.000 303.000,307.000 287.000,275.000 C271.333,307.000 255.667,339.000 240.000,371.000 C181.333,371.000 122.667,371.000 64.000,371.000 C104.667,406.000 145.333,441.000 186.000,476.000 C151.667,523.667 117.333,571.333 83.000,619.000 C55.333,619.000 27.667,619.000 -0.000,619.000 C-0.000,412.667 -0.000,206.333 -0.000,-0.000 Z" />
);

export const Kittypet: React.FC<IClanSymbolProps> = (props) => {
    return <div className={classNames(scss.clanSymbolFallback, props.className)}>Ktp</div>;
};

export const Loner: React.FC<IClanSymbolProps> = (props) => {
    return <div className={classNames(scss.clanSymbolFallback, props.className)}>Lon</div>;
};

export const Rogue: React.FC<IClanSymbolProps> = (props) => {
    return <div className={classNames(scss.clanSymbolFallback, props.className)}>Rog</div>;
};

export interface IRdfClanSymbolProps extends IClanSymbolProps {
    qName: RdfQName;
}

const clanLookup: Record<RdfQName, React.FC<IClanSymbolProps> | string> = {
    "wd:Q627": ThunderClan,
    "wd:Q628": ShadowClan,
    "wd:Q630": RiverClan,
    "wd:Q631": WindClan,
    "wd:Q632": SkyClan,
    "wd:Q634": StarClan,
    "wd:Q635": "DaF",
    "wd:Q638": "mTRW",
    "wd:Q639": "aTRW",
    "wd:Q640": "TEH",
    "wd:Q645": "mTiC",
    "wd:Q646": "mLiC",
    "wd:Q647": Kittypet,
    "wd:Q648": Loner,
    "wd:Q649": Rogue,
    "wd:Q664": "Non",
};

const RdfClanSymbolCore = React.forwardRef<HTMLDivElement, IRdfClanSymbolProps>((props, ref) => {
    const ClanComponent = clanLookup[props.qName];
    if (typeof ClanComponent === "string") return <div className={classNames(scss.clanSymbolFallback, props.className)}>{ClanComponent}</div>;
    if (ClanComponent) return <ClanComponent className={props.className} />;
    return <div ref={ref} className={classNames(scss.clanSymbolFallback, props.className)}>??</div>;
});
RdfClanSymbolCore.displayName = "RdfClanSymbolCore";

export const RdfClanSymbol: React.FC<IRdfClanSymbolProps> = (props) => {
    return (<Tooltip title={<RdfEntityLabel qName={props.qName} />}><RdfClanSymbolCore {...props} /></Tooltip>);
};
RdfClanSymbol.displayName = "RdfClanSymbol";
